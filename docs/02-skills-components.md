# Skills 组成部分

## 目录结构

一个完整的 Skill 由四个核心组件构成：

```
skill-name/
├── SKILL.md              # 大脑：核心定义文件
├── scripts/              # 双手：可执行脚本
│   ├── query_db.py
│   └── run_tests.sh
├── references/           # 知识库：参考文档
│   ├── api-docs.md
│   ├── schema.sql
│   └── coding-standards.md
└── assets/               # 工具箱：资源文件
    ├── templates/
    └── configs/
```

## 1. 核心定义文件 (SKILL.md) - "大脑"

这是 Skill 的核心，告诉 AI **什么时候用** 和 **怎么用**。

### 结构组成

```markdown
---
name: data-explorer
description: 自动探索企业数据库，生成数据质量报告
---

# 数据探索专家

## 角色定位
作为数据分析专家，你需要...

## 触发场景
- 用户请求"分析数据"、"探索数据库"
- 检测到新的数据源接入

## 执行步骤
1. 连接数据源
2. 执行探索脚本
3. 生成报告

## 输出规范
...

## 约束条件
...
```

### 两部分说明

| 部分 | 作用 | 内容 |
|------|------|------|
| **YAML Header** | 让 AI 判断何时调用 | name, description |
| **Markdown Body** | 告诉 AI 如何执行 | 角色、步骤、约束 |

## 2. 可执行脚本 (scripts/) - "双手"

弥补 AI 在**精确计算、文件操作、确定性逻辑**上的不足。

### 适用场景

| 场景 | 示例 |
|------|------|
| 数据库查询 | 执行 SQL，返回结构化结果 |
| 文件操作 | 解析 PDF、生成报表 |
| API 调用 | 调用外部服务获取数据 |
| 测试执行 | 运行单元测试、集成测试 |
| 数据处理 | 精确计算、格式转换 |

### 脚本规范

```python
#!/usr/bin/env python3
"""
脚本用途：查询企业数据库
调用方式：python query_db.py <company_name>
输出格式：JSON
"""
import sys
import json

def main():
    if len(sys.argv) < 2:
        print(json.dumps({"error": "缺少公司名参数"}))
        sys.exit(1)
    
    result = query_database(sys.argv[1])
    print(json.dumps(result, ensure_ascii=False))

if __name__ == '__main__':
    main()
```

### 关键原则

- **输入输出标准化** - 用 JSON 或明确格式
- **错误处理完善** - 返回错误信息而非崩溃
- **无副作用** - 查询优先，修改需明确标注
- **超时控制** - 长任务设置超时

## 3. 参考文档 (references/) - "知识库"

为 AI 提供**领域专业知识**和**项目上下文**。

### 典型内容

| 类型 | 示例 | 作用 |
|------|------|------|
| **Schema 定义** | 数据库表结构、字段说明 | 生成正确的 SQL |
| **API 文档** | 接口定义、参数说明 | 正确调用 API |
| **代码规范** | 命名规则、架构约定 | 生成符合规范的代码 |
| **业务文档** | 业务流程、术语定义 | 理解业务上下文 |
| **配置说明** | 环境变量、连接方式 | 正确配置和调用 |

### 组织方式

```
references/
├── database/
│   ├── ent_db_schema.md      # 企业库表结构
│   └── vector_collections.md  # 向量库 collection 说明
├── api/
│   └── internal_api.md        # 内部 API 文档
└── standards/
    └── coding_style.md        # 代码规范
```

## 4. 资源文件 (assets/) - "工具箱"

用于**生成输出物**的模板和预设配置。

### 典型内容

| 类型 | 示例 |
|------|------|
| **代码模板** | 项目脚手架、组件模板 |
| **文档模板** | 报告模板、README 模板 |
| **配置文件** | .eslintrc、pyproject.toml |
| **静态资源** | Logo、图标、样式 |

## 四个组件的协作关系

```
用户请求
    │
    ▼
┌─────────────────────────────────────────────────────────┐
│                    SKILL.md (大脑)                       │
│  判断是否激活 → 理解任务 → 规划执行步骤                   │
└─────────────────────────────────────────────────────────┘
    │                    │                    │
    ▼                    ▼                    ▼
┌─────────┐      ┌─────────────┐      ┌─────────────┐
│scripts/ │      │ references/ │      │  assets/    │
│ (执行)  │◄────►│  (查阅)     │      │  (使用)     │
└─────────┘      └─────────────┘      └─────────────┘
    │                                        │
    └────────────────┬───────────────────────┘
                     ▼
              ┌───────────┐
              │  输出结果  │
              └───────────┘
```

## 下一步

阅读 [03-skills-integration.md](03-skills-integration.md) 了解各部分如何联动。
